<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Tet 2026</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@300;500;700&display=swap" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <style>
        :root {
            --accent: #ffd1d1;
            --bg: #010103;
            --glass: rgba(255, 255, 255, 0.03);
            --glow: rgba(255, 209, 209, 0.4);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; cursor: none; }
        body { background: var(--bg); color: #fff; font-family: 'Quicksand', sans-serif; overflow: hidden; }

        #canvas-container { position: fixed; inset: 0; z-index: 1; }

        /* CURSOR */
        #cursor-dot { width: 6px; height: 6px; background: #fff; border-radius: 50%; position: fixed; z-index: 10000; pointer-events: none; }
        #cursor-ring { width: 40px; height: 40px; border: 1px solid var(--accent); border-radius: 50%; position: fixed; z-index: 9999; pointer-events: none; }

        /* PROGRESS BAR */
        .progress-indicator { position: fixed; top: 0; left: 0; width: 100%; height: 3px; background: rgba(255,255,255,0.05); z-index: 1500; }
        #bar { width: 0%; height: 100%; background: var(--accent); box-shadow: 0 0 15px var(--accent); transition: width 0.8s ease; }

        /* STAGE & CARDS */
        .stage { position: fixed; inset: 0; display: flex; justify-content: center; align-items: center; z-index: 10; pointer-events: none; perspective: 2000px; }

        .letter-card {
            position: absolute; width: 85%; max-width: 650px; padding: 50px;
            background: var(--glass); backdrop-filter: blur(40px); -webkit-backdrop-filter: blur(40px);
            border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 35px;
            text-align: center; opacity: 0; visibility: hidden;
            transform-style: preserve-3d;
            box-shadow: 0 40px 100px rgba(0,0,0,0.8);
        }

        .letter-card::after {
            content: ''; position: absolute; inset: -1px; border-radius: 35px; padding: 2px;
            background: linear-gradient(90deg, transparent, var(--accent), transparent, var(--accent));
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask-composite: exclude; -webkit-mask-composite: xor;
            background-size: 200% 200%; animation: borderFlow 4s linear infinite;
        }

        @keyframes borderFlow { 0% { background-position: 0% 50%; } 100% { background-position: 200% 50%; } }

        h2 { font-family: 'Dancing Script', cursive; font-size: clamp(32px, 5vw, 45px); color: var(--accent); margin-bottom: 25px; text-shadow: 0 0 20px var(--glow); }
        p { font-size: 19px; line-height: 1.8; font-weight: 300; color: rgba(255,255,255,0.9); margin-bottom: 15px; }
        
        .signature { font-family: 'Dancing Script', cursive; font-size: 28px; margin-top: 30px; text-align: right; color: var(--accent); }

        /* NAVIGATION */
        .nav-zone { position: fixed; top: 0; height: 100%; width: 25%; z-index: 1000; cursor: pointer; }
        .nav-left { left: 0; } .nav-right { right: 0; }

        /* ENTRANCE */
        .entrance { position: fixed; inset: 0; background: #000; z-index: 2000; display: flex; flex-direction: column; justify-content: center; align-items: center; transition: 1.5s cubic-bezier(0.8, 0, 0.2, 1); }
        .entrance.hide { transform: translateY(-100%); pointer-events: none; }
        .envelope { font-size: 100px; cursor: pointer; filter: drop-shadow(0 0 40px var(--glow)); transition: 0.5s; }
        .envelope:hover { transform: scale(1.1) rotate(10deg); }

        .hint { position: fixed; bottom: 30px; width: 100%; text-align: center; font-size: 10px; letter-spacing: 5px; opacity: 0.4; z-index: 100; text-transform: uppercase; pointer-events: none; }
    </style>
</head>
<body>

<div id="canvas-container"></div>
<div id="cursor-dot"></div>
<div id="cursor-ring"></div>
<div class="progress-indicator"><div id="bar"></div></div>

<div class="entrance" id="entrance">
    <div class="envelope" onclick="startJourney()">âœ‰ï¸</div>
    <p style="margin-top: 25px; font-size: 11px; letter-spacing: 10px; color: var(--accent);">CHáº M Äá»‚ Má»</p>
</div>

<main class="stage">
    <div class="letter-card">
        <h2>Táº¿t 2026</h2>
        <p>Gá»­i báº¡n,</p>
        <p>Má»™t lá»i chÃºc nhá», Ä‘Æ°á»£c gá»­i Ä‘i trong nhá»¯ng ngÃ y Ä‘áº§u nÄƒm má»›i âœ¨</p>
    </div>

    <div class="letter-card">
        <p>Má»™t nÄƒm cÅ© Ä‘Ã£ khÃ©p láº¡i, mang theo Ä‘á»§ Ä‘áº§y ká»· niá»‡m.</p>
        <p>CÃ³ nhá»¯ng Ä‘iá»u trá»n váº¹n, cÃ³ nhá»¯ng Ä‘iá»u cÃ²n dang dá»Ÿ â€” vÃ  táº¥t cáº£ Ä‘á»u xá»©ng Ä‘Ã¡ng Ä‘Æ°á»£c trÃ¢n trá»ng.</p>
    </div>

    <div class="letter-card">
        <p>NÄƒm má»›i Ä‘áº¿n rá»“i.</p>
        <p>Mong ráº±ng báº¡n bÆ°á»›c vÃ o 2026 vá»›i má»™t tÃ¢m tháº¿ nháº¹ nhÃ ng hÆ¡n, an yÃªn hÆ¡n.</p>
    </div>

    <div class="letter-card">
        <h2>XuÃ¢n má»›i an lÃ nh ğŸŒ¸</h2>
        <p>ChÃºc báº¡n luÃ´n cÃ³ Ä‘á»§ sá»©c khá»e Ä‘á»ƒ theo Ä‘uá»•i Ä‘iá»u mÃ¬nh muá»‘n</p>
        <p>Äá»§ bÃ¬nh tÄ©nh trÆ°á»›c khÃ³ khÄƒn, vÃ  Ä‘á»§ dÅ©ng cáº£m Ä‘á»ƒ báº¯t Ä‘áº§u nhá»¯ng Ä‘iá»u má»›i</p>
    </div>

    <div class="letter-card">
        <p>Mong ráº±ng 2026 sáº½ Ä‘á»‘i xá»­ vá»›i báº¡n tháº­t dá»‹u dÃ ng.</p>
        <p>CÃ³ niá»m vui trong nhá»¯ng Ä‘iá»u nhá» bÃ©, vÃ  hy vá»ng trong nhá»¯ng ngÃ y tÆ°á»Ÿng chá»«ng ráº¥t bÃ¬nh thÆ°á»ng.</p>
    </div>

    <div class="letter-card">
        <p>DÃ¹ báº¡n Ä‘ang á»Ÿ Ä‘Ã¢u, Ä‘ang lÃ  ai, hay Ä‘ang trÃªn hÃ nh trÃ¬nh nÃ o...</p>
        <p>Báº¡n váº«n xá»©ng Ä‘Ã¡ng vá»›i nhá»¯ng Ä‘iá»u tá»‘t Ä‘áº¹p nháº¥t</p>
    </div>

    <div class="letter-card">
        <p>Sau táº¥t cáº£, cáº£m Æ¡n Ä‘Ã£ Ä‘á»“ng hÃ nh cÃ¹ng mÃ¬nh trong má»™t nÄƒm qua :)</p>

    </div>

    <div class="letter-card">
        <h2>ChÃºc má»«ng nÄƒm má»›i 2026 ğŸ†</h2>
        <p><strong>BÃ¬nh an â€” May máº¯n â€” VÃ  tháº­t nhiá»u ná»¥ cÆ°á»i.</strong></p>
        <div class="signature">Duy Quang</div>
    </div>
</main>


<div class="nav-zone nav-left" onclick="navigate(-1)"></div>
<div class="nav-zone nav-right" onclick="navigate(1)"></div>
<div class="hint">Cháº¡m hai bÃªn Ä‘á»ƒ xuyÃªn khÃ´ng</div>

<iframe id="bgm" src="" style="display:none" allow="autoplay"></iframe>

<script>
/** 1. THREE.JS - CORE ENGINE **/
const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(65, window.innerWidth / window.innerHeight, 0.1, 2000);
const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
document.getElementById('canvas-container').appendChild(renderer.domElement);

// --- Há»† THá»NG SAO DÃ€Y Äáº¶C (STARFIELD) ---
const starGeo = new THREE.BufferGeometry();
const starCount = 12000;
const starPos = new Float32Array(starCount * 3);
for(let i=0; i<starCount*3; i+=3) {
    starPos[i] = (Math.random() - 0.5) * 150;
    starPos[i+1] = (Math.random() - 0.5) * 150;
    starPos[i+2] = (Math.random() - 0.5) * 400; // Tráº£i dÃ i theo chiá»u sÃ¢u
}
starGeo.setAttribute('position', new THREE.BufferAttribute(starPos, 3));
const starMat = new THREE.PointsMaterial({ color: 0xffffff, size: 0.07, transparent: true, opacity: 0.8 });
const stars = new THREE.Points(starGeo, starMat);
scene.add(stars);

// --- TINH VÃ‚N (NEBULA) ---
function addNebula(color, x, y, z) {
    const geo = new THREE.SphereGeometry(15, 16, 16);
    const mat = new THREE.MeshBasicMaterial({
        color: color,
        transparent: true,
        opacity: 0.03,
        blending: THREE.AdditiveBlending,
        depthWrite: false
    });
    const mesh = new THREE.Mesh(geo, mat);
    mesh.position.set(x, y, z);
    mesh.scale.set(2, 1, 2);
    scene.add(mesh);
    return mesh;
}
const nebulas = [
    addNebula(0xffd1d1, 20, 10, -50),
    addNebula(0x4444ff, -20, -10, -150),
    addNebula(0xffd1d1, 0, 15, -250)
];

// --- Cá»°C QUANG (AURORA) ---
function createAurora() {
    const group = new THREE.Group();
    const colors = [0x7de2d1, 0xffd1d1, 0x3399ff];
    for(let i=0; i<3; i++) {
        const geo = new THREE.PlaneGeometry(120, 40, 10, 10);
        const mat = new THREE.MeshBasicMaterial({
            color: colors[i],
            transparent: true,
            opacity: 0.04,
            side: THREE.DoubleSide,
            blending: THREE.AdditiveBlending
        });
        const mesh = new THREE.Mesh(geo, mat);
        mesh.position.set(0, 25, -100 - (i*60));
        mesh.rotation.x = Math.PI / 2.2;
        group.add(mesh);
    }
    scene.add(group);
    return group;
}
const auroraField = createAurora();

// --- CÃC TRáº M Dá»ªNG (NODES) ---
const nodes = [];
const cards = document.querySelectorAll('.letter-card');
for(let i=0; i<cards.length; i++) {
    const g = new THREE.Group();
    const core = new THREE.Mesh(new THREE.SphereGeometry(0.15, 16, 16), new THREE.MeshBasicMaterial({ color: 0xffd1d1 }));
    const glow = new THREE.Mesh(new THREE.SphereGeometry(1.2, 16, 16), new THREE.MeshBasicMaterial({ color: 0xffd1d1, transparent: true, opacity: 0.1 }));
    g.add(core, glow);
    // Má»—i node cÃ¡ch nhau xa hÆ¡n Ä‘á»ƒ báº§u trá»i di chuyá»ƒn nhiá»u
    g.position.set((Math.random()-0.5)*15, (Math.random()-0.5)*15, -i * 35);
    scene.add(g);
    nodes.push(g);
}

camera.position.z = 15;
let lookTarget = new THREE.Vector3(0, 0, 0);

/** 2. NAVIGATION LOGIC **/
let current = -1;
let isMoving = false;
const bar = document.getElementById('bar');

function navigate(dir) {
    if(isMoving) return;
    const next = current + dir;
    if(next < 0 || next >= cards.length) return;
    
    isMoving = true;

    if(current >= 0) {
        gsap.to(cards[current], { 
            opacity: 0, z: dir > 0 ? 300 : -300, rotateX: dir > 0 ? -20 : 20, 
            duration: 0.8, onComplete: (el) => { cards[current-dir].style.visibility = 'hidden'; } 
        });
    }

    current = next;
    const target = nodes[current];

    // Warp Speed effect
    gsap.to(starMat, { size: 0.2, duration: 0.5, yoyo: true, repeat: 1 });

    gsap.to(camera.position, {
        x: target.position.x, y: target.position.y, z: target.position.z + 8,
        duration: 2.8, ease: "expo.inOut"
    });
    
    gsap.to(lookTarget, {
        x: target.position.x, y: target.position.y, z: target.position.z,
        duration: 2.8, ease: "expo.inOut"
    });

    const inCard = cards[current];
    inCard.style.visibility = 'visible';
    gsap.fromTo(inCard, 
        { opacity: 0, z: dir > 0 ? -500 : 500, rotateX: dir > 0 ? 30 : -30 },
        { opacity: 1, z: 0, rotateX: 0, duration: 1.8, ease: "power3.out", delay: 0.8, onComplete: () => isMoving = false }
    );

    gsap.to(bar, { width: `${((current + 1) / cards.length) * 100}%` });
}

function startJourney() {
    document.getElementById('entrance').classList.add('hide');
    // Nháº¡c chill/starry
    document.getElementById('bgm').src = "https://www.youtube.com/embed/Qhx-RMpRwSg?autoplay=1";
    setTimeout(() => navigate(1), 1000);
}

/** 3. ANIMATION LOOP **/
const cDot = document.getElementById('cursor-dot');
const cRing = document.getElementById('cursor-ring');
document.addEventListener('mousemove', (e) => {
    gsap.to(cDot, { x: e.clientX, y: e.clientY, duration: 0 });
    gsap.to(cRing, { x: e.clientX - 20, y: e.clientY - 20, duration: 0.3 });
});

function animate() {
    requestAnimationFrame(animate);
    const time = Date.now() * 0.001;
    
    camera.lookAt(lookTarget);
    stars.rotation.y += 0.0003;
    
    // Aurora wave
    auroraField.children.forEach((mesh, i) => {
        mesh.position.y += Math.sin(time + i) * 0.01;
        mesh.rotation.z += 0.0005;
    });

    // Nebula pulse
    nebulas.forEach((n, i) => {
        n.rotation.y += 0.001;
        n.scale.setScalar(1 + Math.sin(time * 0.5 + i) * 0.1);
    });
    
    nodes.forEach((n, i) => {
        n.children[1].scale.setScalar(1 + Math.sin(time * 2 + i)*0.2);
    });
    
    renderer.render(scene, camera);
}
animate();

window.addEventListener('resize', () => {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
});
</script>
</body>
</html>
